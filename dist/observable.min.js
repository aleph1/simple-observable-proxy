const e=new WeakMap,t=new WeakMap,o=new WeakMap,n=[],r=e=>{n.push(e)},s=e=>{[...new Set(n.flat(Math.INFINTY))].forEach((e=>{e()})),n.length=0,window.requestAnimationFrame(s)},a=(n,s,i={})=>{let c=e.get(n)||t.has(n)&&n,p=c?t.get(c):[s];if(c)return p.includes(s)||p.push(s),c;const u={get(e,t){const o=e[t];if(void 0!==o)return o&&"object"==typeof o&&(e[t]=a(o,s,i)),e[t]},set:(e,t,o)=>(e[t]!==o&&(e[t]=o,r(p)),!0),deleteProperty:(e,t)=>t in e&&(delete e[t],r(p),!0)};return i.revocable?(c=Proxy.revocable(n,u),o.set(c.proxy,c.revoke),c=c.proxy):c=new Proxy(n,u),e.set(n,c),t.set(c,p),c};window.requestAnimationFrame(s),module.exports={observe:a,unobserve:(o,n)=>{const r=t.get(e.get(o)||o);if(r){const e=r.indexOf(n);-1!==e&&r.splice(e,1)}},revoke:t=>{const n=o.get(e.get(t)||t);return!!n&&(n(),!0)}};